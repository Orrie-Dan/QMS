generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String
  password  String
  role      UserRole @default(USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum UserRole {
  ADMIN
  USER
}

model Client {
  id         String        @id @default(cuid())
  name       String
  email      String?
  phone      String?
  company    String?
  address    String?
  city       String?
  state      String?
  postalCode String?
  country    String?
  notes      String?
  createdAt  DateTime      @default(now())
  updatedAt  DateTime      @updatedAt
  quotations Quotation[]
}

model Quotation {
  id            String           @id @default(cuid())
  number        String           @unique
  clientId      String
  client        Client           @relation(fields: [clientId], references: [id])
  date          DateTime         @default(now())
  validUntil    DateTime?
  status        QuotationStatus  @default(DRAFT)
  subtotal      Decimal          @db.Decimal(12, 2) @default(0)
  tax           Decimal          @db.Decimal(12, 2) @default(0)
  total         Decimal          @db.Decimal(12, 2) @default(0)
  notes         String?
  items         QuotationItem[]
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt
}

enum QuotationStatus {
  DRAFT
  SENT
  ACCEPTED
  REJECTED
  EXPIRED
}

model QuotationItem {
  id           String   @id @default(cuid())
  quotationId  String
  quotation    Quotation @relation(fields: [quotationId], references: [id])
  description  String
  quantity     Int      @default(1)
  unitPrice    Decimal  @db.Decimal(12, 2)
  total        Decimal  @db.Decimal(12, 2)
}

model Setting {
  id        String   @id @default(cuid())
  key       String   @unique
  value     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

